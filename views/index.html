{% extends "layout.html" %}

{% block content %}
<div>
  <ul id="messages"></ul>
</div>
<form id="chat">
  <input id="chatMessage" autocomplete="off">
  <button>Send</button>
</form>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>
<script>
  var socket = io();
  var chat = document.getElementById('chat');
  chat.addEventListener('submit', function(e) {
    var message = document.getElementById('chatMessage');
    socket.emit('chat message', message.value);
    message.value = '';
    e.preventDefault();
  });
  socket.on('chat message', function(msg) {
    var item = document.createElement('li');
    item.innerHTML = msg;
    document.getElementById('messages').appendChild(item);
  });
</script>
{% endblock %}
